{"ast":null,"code":"var _jsxFileName = \"/home/anomy/Documents/nextjs-projects/yazbana/client/pages/posts/[slug].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '@components/layout/Layout';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport ErrorPage from 'next/error';\nimport { postQuery, postSlugsQuery } from '../../lib/queries';\nimport { urlForImage, usePreviewSubscription } from '../../lib/sanity';\nimport { sanityClient, getClient, overlayDrafts } from '../../lib/sanity.server';\nimport PostTitle from '@components/PostTitle';\nimport { Box } from '@chakra-ui/layout';\nimport PostHeader from '@components/PostHeader';\nimport PostBody from '@components/PostBody';\nexport default function Post({\n  data = {},\n  preview\n}) {\n  var _data$post;\n\n  const router = useRouter();\n  console.log(data);\n  const slug = data === null || data === void 0 ? void 0 : (_data$post = data.post) === null || _data$post === void 0 ? void 0 : _data$post.slug;\n  const {\n    data: {\n      post,\n      morePosts\n    }\n  } = usePreviewSubscription(postQuery, {\n    params: {\n      slug\n    },\n    initialData: data,\n    enabled: preview && slug\n  });\n\n  if (!router.isFallback && !slug) {\n    return __jsx(ErrorPage, {\n      statusCode: 404,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return __jsx(Layout, {\n    preview: preview,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }\n  }, router.isFallback ? __jsx(PostTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, \"Loading...\") : __jsx(Box, {\n    as: \"article\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 11\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, post.title, \" | \", process.env.SITE_NAME), post.mainImage && __jsx(\"meta\", {\n    key: \"ogImage\",\n    property: \"og:image\",\n    content: urlForImage(post.mainImage).width(1200).height(627).fit('crop').url(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 15\n    }\n  })), __jsx(PostHeader, {\n    title: post.title,\n    coverImage: post.mainImage,\n    date: post.publishedAt,\n    author: post.author,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }), __jsx(PostBody, {\n    content: post.body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }))) //     <Header />\n  //     {router.isFallback ? (\n  //       <PostTitle>Loading…</PostTitle>\n  //     ) : (\n  //       <>\n  //         <article>\n  //           <Head>\n  //             <title>\n  //               {post.title} | Next.js Blog Example with {CMS_NAME}\n  //             </title>\n  //             {post.coverImage && (\n  //               <meta\n  //                 key=\"ogImage\"\n  //                 property=\"og:image\"\n  //                 content={urlForImage(post.coverImage).width(1200).height(627).fit('crop').url()}\n  //               />\n  //             )}\n  //           </Head>\n  //           <PostHeader\n  //           />\n  //           <PostBody content={post.content} />\n  //         </article>\n  //         <SectionSeparator />\n  //         {morePosts.length > 0 && <MoreStories posts={morePosts} />}\n  //       </>\n  //     )}\n  ;\n}\nexport async function getStaticProps({\n  params,\n  preview = false\n}) {\n  const {\n    post,\n    morePosts\n  } = await getClient(preview).fetch(postQuery, {\n    slug: params.slug\n  });\n  return {\n    props: {\n      preview,\n      data: {\n        post,\n        morePosts: overlayDrafts(morePosts)\n      }\n    }\n  };\n}\nexport async function getStaticPaths() {\n  const paths = await sanityClient.fetch(postSlugsQuery);\n  return {\n    paths: paths.map(slug => ({\n      params: {\n        slug\n      }\n    })),\n    fallback: true\n  };\n}","map":{"version":3,"sources":["/home/anomy/Documents/nextjs-projects/yazbana/client/pages/posts/[slug].js"],"names":["Layout","Head","useRouter","ErrorPage","postQuery","postSlugsQuery","urlForImage","usePreviewSubscription","sanityClient","getClient","overlayDrafts","PostTitle","Box","PostHeader","PostBody","Post","data","preview","router","console","log","slug","post","morePosts","params","initialData","enabled","isFallback","title","process","env","SITE_NAME","mainImage","width","height","fit","url","publishedAt","author","body","getStaticProps","fetch","props","getStaticPaths","paths","map","fallback"],"mappings":"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","sourcesContent":["import Layout from '@components/layout/Layout';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport ErrorPage from 'next/error';\nimport { postQuery, postSlugsQuery } from '../../lib/queries';\nimport { urlForImage, usePreviewSubscription } from '../../lib/sanity';\nimport { sanityClient, getClient, overlayDrafts } from '../../lib/sanity.server';\nimport PostTitle from '@components/PostTitle';\nimport { Box } from '@chakra-ui/layout';\nimport PostHeader from '@components/PostHeader';\nimport PostBody from '@components/PostBody';\n\nexport default function Post({ data = {}, preview }) {\n  const router = useRouter();\n  console.log(data);\n  const slug = data?.post?.slug;\n  const {\n    data: { post, morePosts },\n  } = usePreviewSubscription(postQuery, {\n    params: { slug },\n    initialData: data,\n    enabled: preview && slug,\n  });\n\n  if (!router.isFallback && !slug) {\n    return <ErrorPage statusCode={404} />;\n  }\n\n  return (\n    <Layout preview={preview}>\n      {/* <pre>{JSON.stringify(post, null, 2)}</pre> */}\n      {router.isFallback ? (\n        <PostTitle>Loading...</PostTitle>\n      ) : (\n        <Box as=\"article\">\n          <Head>\n            <title>\n              {post.title} | {process.env.SITE_NAME}\n            </title>\n            {post.mainImage && (\n              <meta\n                key=\"ogImage\"\n                property=\"og:image\"\n                content={urlForImage(post.mainImage).width(1200).height(627).fit('crop').url()}\n              />\n            )}\n          </Head>\n          <PostHeader\n            title={post.title}\n            coverImage={post.mainImage}\n            date={post.publishedAt}\n            author={post.author}\n          />\n          <PostBody content={post.body} />\n        </Box>\n      )}\n    </Layout>\n    //     <Header />\n    //     {router.isFallback ? (\n    //       <PostTitle>Loading…</PostTitle>\n    //     ) : (\n    //       <>\n    //         <article>\n    //           <Head>\n    //             <title>\n    //               {post.title} | Next.js Blog Example with {CMS_NAME}\n    //             </title>\n    //             {post.coverImage && (\n    //               <meta\n    //                 key=\"ogImage\"\n    //                 property=\"og:image\"\n    //                 content={urlForImage(post.coverImage).width(1200).height(627).fit('crop').url()}\n    //               />\n    //             )}\n    //           </Head>\n    //           <PostHeader\n\n    //           />\n    //           <PostBody content={post.content} />\n    //         </article>\n    //         <SectionSeparator />\n    //         {morePosts.length > 0 && <MoreStories posts={morePosts} />}\n    //       </>\n    //     )}\n  );\n}\n\nexport async function getStaticProps({ params, preview = false }) {\n  const { post, morePosts } = await getClient(preview).fetch(postQuery, {\n    slug: params.slug,\n  });\n\n  return {\n    props: {\n      preview,\n      data: {\n        post,\n        morePosts: overlayDrafts(morePosts),\n      },\n    },\n  };\n}\n\nexport async function getStaticPaths() {\n  const paths = await sanityClient.fetch(postSlugsQuery);\n  return {\n    paths: paths.map((slug) => ({ params: { slug } })),\n    fallback: true,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}
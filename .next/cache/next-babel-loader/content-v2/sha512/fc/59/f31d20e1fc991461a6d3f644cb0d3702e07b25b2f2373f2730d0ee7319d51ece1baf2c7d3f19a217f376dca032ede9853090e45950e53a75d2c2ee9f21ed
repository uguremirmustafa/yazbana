{"ast":null,"code":"var _require = require('next/router'),\n    Router = _require.Router; // initRouterListeners();\n\n\nexport function initRouterListeners() {\n  var routes = [];\n  Router.events.on('routeChangeStart', function (url) {\n    pushCurrentRouteInfo();\n  });\n  Router.events.on('routeChangeComplete', function (url) {\n    fixScrollPosition();\n  }); // Hack to set scrollTop because of this issue:\n  // - https://github.com/zeit/next.js/issues/1309\n  // - https://github.com/zeit/next.js/issues/3303\n\n  function pushCurrentRouteInfo() {\n    routes.push({\n      pathname: Router.pathname,\n      scrollY: window.scrollY\n    });\n  } // TODO: We guess we're going back, but there must be a better way\n  // https://github.com/zeit/next.js/issues/1309#issuecomment-435057091\n\n\n  function isBack() {\n    return routes.length >= 2 && Router.pathname === routes[routes.length - 2].pathname;\n  }\n\n  function fixScrollPosition() {\n    var scrollY = 0;\n\n    if (isBack()) {\n      routes.pop(); // route where we come from\n\n      var targetRoute = routes.pop(); // route where we return\n\n      scrollY = targetRoute.scrollY; // scrollY we had before\n    }\n\n    window.requestAnimationFrame(function () {\n      return window.scrollTo(0, scrollY);\n    });\n  }\n}","map":{"version":3,"sources":["/home/anomy/Documents/nextjs-projects/yazbana/client/utils/scrollRestoration.js"],"names":["require","Router","initRouterListeners","routes","events","on","url","pushCurrentRouteInfo","fixScrollPosition","push","pathname","scrollY","window","isBack","length","pop","targetRoute","requestAnimationFrame","scrollTo"],"mappings":"eAAmBA,OAAO,CAAC,aAAD,C;IAAlBC,M,YAAAA,M,EAER;;;AAEA,OAAO,SAASC,mBAAT,GAA+B;AACpC,MAAMC,MAAM,GAAG,EAAf;AAEAF,EAAAA,MAAM,CAACG,MAAP,CAAcC,EAAd,CAAiB,kBAAjB,EAAqC,UAACC,GAAD,EAAS;AAC5CC,IAAAA,oBAAoB;AACrB,GAFD;AAIAN,EAAAA,MAAM,CAACG,MAAP,CAAcC,EAAd,CAAiB,qBAAjB,EAAwC,UAACC,GAAD,EAAS;AAC/CE,IAAAA,iBAAiB;AAClB,GAFD,EAPoC,CAWpC;AACA;AACA;;AAEA,WAASD,oBAAT,GAAgC;AAC9BJ,IAAAA,MAAM,CAACM,IAAP,CAAY;AAAEC,MAAAA,QAAQ,EAAET,MAAM,CAACS,QAAnB;AAA6BC,MAAAA,OAAO,EAAEC,MAAM,CAACD;AAA7C,KAAZ;AACD,GAjBmC,CAmBpC;AACA;;;AACA,WAASE,MAAT,GAAkB;AAChB,WAAOV,MAAM,CAACW,MAAP,IAAiB,CAAjB,IAAsBb,MAAM,CAACS,QAAP,KAAoBP,MAAM,CAACA,MAAM,CAACW,MAAP,GAAgB,CAAjB,CAAN,CAA0BJ,QAA3E;AACD;;AAED,WAASF,iBAAT,GAA6B;AAC3B,QAAIG,OAAO,GAAG,CAAd;;AAEA,QAAIE,MAAM,EAAV,EAAc;AACZV,MAAAA,MAAM,CAACY,GAAP,GADY,CACE;;AACd,UAAMC,WAAW,GAAGb,MAAM,CAACY,GAAP,EAApB,CAFY,CAEsB;;AAClCJ,MAAAA,OAAO,GAAGK,WAAW,CAACL,OAAtB,CAHY,CAGmB;AAChC;;AAEDC,IAAAA,MAAM,CAACK,qBAAP,CAA6B;AAAA,aAAML,MAAM,CAACM,QAAP,CAAgB,CAAhB,EAAmBP,OAAnB,CAAN;AAAA,KAA7B;AACD;AACF","sourcesContent":["const { Router } = require('next/router');\n\n// initRouterListeners();\n\nexport function initRouterListeners() {\n  const routes = [];\n\n  Router.events.on('routeChangeStart', (url) => {\n    pushCurrentRouteInfo();\n  });\n\n  Router.events.on('routeChangeComplete', (url) => {\n    fixScrollPosition();\n  });\n\n  // Hack to set scrollTop because of this issue:\n  // - https://github.com/zeit/next.js/issues/1309\n  // - https://github.com/zeit/next.js/issues/3303\n\n  function pushCurrentRouteInfo() {\n    routes.push({ pathname: Router.pathname, scrollY: window.scrollY });\n  }\n\n  // TODO: We guess we're going back, but there must be a better way\n  // https://github.com/zeit/next.js/issues/1309#issuecomment-435057091\n  function isBack() {\n    return routes.length >= 2 && Router.pathname === routes[routes.length - 2].pathname;\n  }\n\n  function fixScrollPosition() {\n    let scrollY = 0;\n\n    if (isBack()) {\n      routes.pop(); // route where we come from\n      const targetRoute = routes.pop(); // route where we return\n      scrollY = targetRoute.scrollY; // scrollY we had before\n    }\n\n    window.requestAnimationFrame(() => window.scrollTo(0, scrollY));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}